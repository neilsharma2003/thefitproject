<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>The Fit Project</title>
    <link rel="icon" type="image/x-icon" href="/favicon.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link
        href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css">
    </link>
</head>
<style>
    body {
        color: #566787;
        background: #f5f5f5;
        font-family: 'Varela Round', sans-serif;
        font-size: 13px;
    }

    .table-responsive {
        margin: 30px 0;
    }

    .table-wrapper {
        background: #fff;
        padding: 20px 25px;
        border-radius: 3px;
        min-width: 1000px;
        box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
    }

    .table-title {
        padding-bottom: 15px;
        background: #435d7d;
        color: #fff;
        padding: 16px 30px;
        min-width: 100%;
        margin: -20px -25px 10px;
        border-radius: 3px 3px 0 0;
    }

    .table-title h2 {
        margin: 5px 0 0;
        font-size: 24px;
    }

    .table-title .btn-group {
        float: right;
    }

    .table-title .btn {
        color: #fff;
        float: right;
        font-size: 13px;
        border: none;
        min-width: 50px;
        border-radius: 2px;
        border: none;
        outline: none !important;
        margin-left: 10px;
    }

    .table-title .btn i {
        float: left;
        font-size: 21px;
        margin-right: 5px;
    }

    .table-title .btn span {
        float: left;
        margin-top: 2px;
    }

    table.table td a {
        font-weight: bold;
        color: #566787;
        display: inline-block;
        text-decoration: none;
        outline: none !important;
    }

    .pagination {
        float: right;
        margin: 0 0 5px;
    }

    .pagination li a {
        border: none;
        font-size: 13px;
        min-width: 30px;
        min-height: 30px;
        color: #999;
        margin: 0 2px;
        line-height: 30px;
        border-radius: 2px !important;
        text-align: center;
        padding: 0 6px;
    }

    .pagination li a:hover {
        color: #666;
    }

    .pagination li.active a,
    .pagination li.active a.page-link {
        background: #03A9F4;
    }

    .pagination li.active a:hover {
        background: #0397d6;
    }

    .pagination li.disabled i {
        color: #ccc;
    }

    .pagination li i {
        font-size: 16px;
        padding-top: 6px
    }

    .hint-text {
        float: left;
        margin-top: 10px;
        font-size: 13px;
    }
</style>

<body id="page-top">
    <% if(user) { %>
        <%- include('./partials/navin') %>
            <% } else { %>
                <%- include('./partials/navout') %>
                    <% } %>
                        <br><br><br>
                        <div class="container-xl">
                            <div class="table-responsive">
                                <div class="table-wrapper">
                                    <div class="table-title">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <h2>
                                                    <%= oneWorkout.workout_name %>
                                                </h2>
                                            </div>
                                            <div class="col-sm-6">
                                                <a href="/addexercise/<%= oneWorkout._id %>" class="btn btn-success"
                                                    data-toggle="modal"><i class="material-icons">&#xE147;</i> <span>Add
                                                        New Exercise</span></a>
                                                <a id="delete" class="btn btn-danger" data-toggle="modal"><i
                                                        class="material-icons">&#xE15C;</i>
                                                    <span>Delete</span></a>
                                            </div>
                                        </div>
                                    </div>
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Exercise Name</th>
                                                <th>Target</th>
                                                <th>Equipment</th>
                                                <th>Sets</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% for(let i=0; i < oneWorkout.workout.length; i++) { %>
                                                <tr>
                                                    <td>
                                                        <%= oneWorkout.workout[i].name %>
                                                    </td>
                                                    <td>
                                                        <%= oneWorkout.workout[i].target %>
                                                    </td>
                                                    <td>
                                                        <%= oneWorkout.workout[i].equipment %>
                                                    </td>
                                                    <td>
                                                        <%= oneWorkout.workout[i].sets %>
                                                    </td>
                                                    <td>
                                                        <a href="<%= oneWorkout.workout[i].gifUrl %>"
                                                            target="_blank">See Exercise</a>
                                                    </td>
                                                </tr>
                                                <% } %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <script
                            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
                        <script>
                            window.addEventListener('DOMContentLoaded', event => {
                                const navbarToggler = document.body.querySelector('.navbar-toggler')
                                const responsiveNavItems = [].slice.call(
                                    document.querySelectorAll('#navbarResponsive .nav-link')
                                );
                                responsiveNavItems.map(function (responsiveNavItem) {
                                    responsiveNavItem.addEventListener('click', () => {
                                        if (window.getComputedStyle(navbarToggler).display !== 'none') {
                                            navbarToggler.click()
                                        }
                                    })
                                })

                            });
                        </script>
                        <script>
                            document.getElementById('delete').addEventListener('click', (e) => {
                                e.preventDefault()
                                fetch('/workout/<%= oneWorkout._id %>', {
                                    method: 'DELETE',
                                    headers: { 'Content-Type': 'application/json' }
                                })
                                    .then(res => {
                                        if (res.statusText == "OK") {
                                            alert("Item successfully deleted")
                                            window.location.replace('/dashboard')
                                        }
                                    })
                                    .catch(err => console.log(err))
                            })
                        </script>
</body>

</html>